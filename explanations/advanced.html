<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Advanced topics - Epinio - the application development engine for Kubernetes</title>
        <!-- Custom HTML head -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('set','anonymizeIp',!0);
ga('create', 'UA-56382716-12', 'auto');
ga('send', 'pageview');
</script>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Documentation for users and developers of Epinio">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../tutorials/quickstart.html"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="../installation/installation.html"><strong aria-hidden="true">3.</strong> Installation</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../installation/installation.html"><strong aria-hidden="true">3.1.</strong> Install Epinio</a></li><li class="chapter-item "><a href="../installation/install_epinio_cli.html"><strong aria-hidden="true">3.2.</strong> Install Epinio cli</a></li><li class="chapter-item "><a href="../installation/dns_setup.html"><strong aria-hidden="true">3.3.</strong> DNS setup</a></li><li class="chapter-item "><a href="../installation/magicDNS_setup.html"><strong aria-hidden="true">3.4.</strong> &quot;magic&quot; DNS setup</a></li><li class="chapter-item "><a href="../installation/uninstall_epinio.html"><strong aria-hidden="true">3.5.</strong> Uninstall Epinio</a></li></ol></li><li class="chapter-item expanded "><a href="../explanations/explanations.html"><strong aria-hidden="true">4.</strong> Explanations</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../explanations/advanced.html" class="active"><strong aria-hidden="true">4.1.</strong> Advanced topics</a></li><li class="chapter-item "><a href="../explanations/detailed-push-process.html"><strong aria-hidden="true">4.2.</strong> Detailed Push Process</a></li><li class="chapter-item "><a href="../explanations/principles.html"><strong aria-hidden="true">4.3.</strong> Principles</a></li><li class="chapter-item "><a href="../explanations/security.html"><strong aria-hidden="true">4.4.</strong> Security</a></li></ol></li><li class="chapter-item expanded "><a href="../howtos/howtos.html"><strong aria-hidden="true">5.</strong> HowTos</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../howtos/certificate_issuers.html"><strong aria-hidden="true">5.1.</strong> Certificate Issuers</a></li><li class="chapter-item "><a href="../howtos/debug.html"><strong aria-hidden="true">5.2.</strong> Debug application</a></li><li class="chapter-item "><a href="../howtos/provision_external_ip_for_local_kubernetes.html"><strong aria-hidden="true">5.3.</strong> Provision external IP address for local Kubernetes</a></li><li class="chapter-item "><a href="../howtos/gitjob_push.html"><strong aria-hidden="true">5.4.</strong> Push with gitjob</a></li><li class="chapter-item "><a href="../howtos/setup_external_s3.html"><strong aria-hidden="true">5.5.</strong> Setup external S3 storage</a></li><li class="chapter-item "><a href="../howtos/setup_external_registry.html"><strong aria-hidden="true">5.6.</strong> Setup external container registry</a></li><li class="chapter-item "><a href="../howtos/port_forwarding.html"><strong aria-hidden="true">5.7.</strong> Port Forwarding</a></li><li class="chapter-item "><a href="../howtos/custom_routes.html"><strong aria-hidden="true">5.8.</strong> Custom Routes</a></li><li class="chapter-item "><a href="../howtos/install_epinio_on_rancher.html"><strong aria-hidden="true">5.9.</strong> Install Epinio on Rancher</a></li><li class="chapter-item "><a href="../howtos/install_epinio_on_rke.html"><strong aria-hidden="true">5.10.</strong> Install Epinio on RKE2 (Rancher)</a></li><li class="chapter-item "><a href="../howtos/install_epinio_on_k3s.html"><strong aria-hidden="true">5.11.</strong> Install Epinio on K3s (local)</a></li><li class="chapter-item "><a href="../howtos/install_epinio_on_rancher_desktop.html"><strong aria-hidden="true">5.12.</strong> Install Epinio on Rancher Desktop (local)</a></li><li class="chapter-item "><a href="../howtos/install_epinio_on_k3d.html"><strong aria-hidden="true">5.13.</strong> Install Epinio on K3d (local)</a></li><li class="chapter-item "><a href="../howtos/install_epinio_on_minikube.html"><strong aria-hidden="true">5.14.</strong> Install Epinio on Minikube (local)</a></li><li class="chapter-item "><a href="../howtos/install_epinio_on_public_cloud.html"><strong aria-hidden="true">5.15.</strong> Install Epinio on Public Clouds</a></li><li class="chapter-item "><a href="../howtos/install_wordpress_application.html"><strong aria-hidden="true">5.16.</strong> Install Wordpress on Epinio</a></li></ol></li><li class="chapter-item expanded "><a href="../references/references.html"><strong aria-hidden="true">6.</strong> Reference documentation</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/system_requirements.html"><strong aria-hidden="true">6.1.</strong> System Requirements</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/windows.html"><strong aria-hidden="true">6.1.1.</strong> Windows</a></li></ol></li><li class="chapter-item "><a href="../references/index.html"><strong aria-hidden="true">6.2.</strong> Command requirements</a></li><li class="chapter-item "><a href="../references/commands.html"><strong aria-hidden="true">6.3.</strong> Command reference</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/cli/epinio.html"><strong aria-hidden="true">6.3.1.</strong> epinio</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/cli/epinio_app.html"><strong aria-hidden="true">6.3.1.1.</strong> epinio_app</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/cli/epinio_app_create.html"><strong aria-hidden="true">6.3.1.1.1.</strong> epinio_app_create</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_delete.html"><strong aria-hidden="true">6.3.1.1.2.</strong> epinio_app_delete</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_env.html"><strong aria-hidden="true">6.3.1.1.3.</strong> epinio_app_env</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/cli/epinio_app_env_list.html"><strong aria-hidden="true">6.3.1.1.3.1.</strong> epinio_app_env_list</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_env_set.html"><strong aria-hidden="true">6.3.1.1.3.2.</strong> epinio_app_env_set</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_env_show.html"><strong aria-hidden="true">6.3.1.1.3.3.</strong> epinio_app_env_show</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_env_unset.html"><strong aria-hidden="true">6.3.1.1.3.4.</strong> epinio_app_env_unset</a></li></ol></li><li class="chapter-item "><a href="../references/cli/epinio_app_list.html"><strong aria-hidden="true">6.3.1.1.4.</strong> epinio_app_list</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_logs.html"><strong aria-hidden="true">6.3.1.1.5.</strong> epinio_app_logs</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_manifest.html"><strong aria-hidden="true">6.3.1.1.6.</strong> epinio_app_manifest</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_show.html"><strong aria-hidden="true">6.3.1.1.7.</strong> epinio_app_show</a></li><li class="chapter-item "><a href="../references/cli/epinio_app_update.html"><strong aria-hidden="true">6.3.1.1.8.</strong> epinio_app_update</a></li></ol></li><li class="chapter-item "><a href="../references/cli/epinio_settings.html"><strong aria-hidden="true">6.3.1.2.</strong> epinio_settings</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/cli/epinio_settings_colors.html"><strong aria-hidden="true">6.3.1.2.1.</strong> epinio_settings_colors</a></li><li class="chapter-item "><a href="../references/cli/epinio_settings_show.html"><strong aria-hidden="true">6.3.1.2.2.</strong> epinio_settings_show</a></li><li class="chapter-item "><a href="../references/cli/epinio_settings_update.html"><strong aria-hidden="true">6.3.1.2.3.</strong> epinio_settings_update</a></li></ol></li><li class="chapter-item "><a href="../references/cli/epinio_info.html"><strong aria-hidden="true">6.3.1.3.</strong> epinio_info</a></li><li class="chapter-item "><a href="../references/cli/epinio_namespace.html"><strong aria-hidden="true">6.3.1.4.</strong> epinio_namespace</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/cli/epinio_namespace_create.html"><strong aria-hidden="true">6.3.1.4.1.</strong> epinio_namespace_create</a></li><li class="chapter-item "><a href="../references/cli/epinio_namespace_delete.html"><strong aria-hidden="true">6.3.1.4.2.</strong> epinio_namespace_delete</a></li><li class="chapter-item "><a href="../references/cli/epinio_namespace_list.html"><strong aria-hidden="true">6.3.1.4.3.</strong> epinio_namespace_list</a></li><li class="chapter-item "><a href="../references/cli/epinio_namespace_show.html"><strong aria-hidden="true">6.3.1.4.4.</strong> epinio_namespace_show</a></li></ol></li><li class="chapter-item "><a href="../references/cli/epinio_push.html"><strong aria-hidden="true">6.3.1.5.</strong> epinio_push</a></li><li class="chapter-item "><a href="../references/cli/epinio_server.html"><strong aria-hidden="true">6.3.1.6.</strong> epinio_server</a></li><li class="chapter-item "><a href="../references/cli/epinio_configuration.html"><strong aria-hidden="true">6.3.1.7.</strong> epinio_configuration</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../references/cli/epinio_configuration_bind.html"><strong aria-hidden="true">6.3.1.7.1.</strong> epinio_configuration_bind</a></li><li class="chapter-item "><a href="../references/cli/epinio_configuration_create.html"><strong aria-hidden="true">6.3.1.7.2.</strong> epinio_configuration_create</a></li><li class="chapter-item "><a href="../references/cli/epinio_configuration_delete.html"><strong aria-hidden="true">6.3.1.7.3.</strong> epinio_configuration_delete</a></li><li class="chapter-item "><a href="../references/cli/epinio_configuration_list.html"><strong aria-hidden="true">6.3.1.7.4.</strong> epinio_configuration_list</a></li><li class="chapter-item "><a href="../references/cli/epinio_configuration_show.html"><strong aria-hidden="true">6.3.1.7.5.</strong> epinio_configuration_show</a></li><li class="chapter-item "><a href="../references/cli/epinio_configuration_unbind.html"><strong aria-hidden="true">6.3.1.7.6.</strong> epinio_configuration_unbind</a></li></ol></li><li class="chapter-item "><a href="../references/cli/epinio_target.html"><strong aria-hidden="true">6.3.1.8.</strong> epinio_target</a></li><li class="chapter-item "><a href="../references/cli/epinio_version.html"><strong aria-hidden="true">6.3.1.9.</strong> epinio_version</a></li></ol></li></ol></li><li class="chapter-item "><a href="../references/settings.html"><strong aria-hidden="true">6.4.</strong> CLI Settings</a></li><li class="chapter-item "><a href="../references/supported-apps.html"><strong aria-hidden="true">6.5.</strong> Supported Applications</a></li><li class="chapter-item "><a href="../references/manifests.html"><strong aria-hidden="true">6.6.</strong> Application Manifests</a></li><li class="chapter-item "><a href="../references/configurations.html"><strong aria-hidden="true">6.7.</strong> Configurations</a></li><li class="chapter-item "><a href="../references/api.html"><strong aria-hidden="true">6.8.</strong> API</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Epinio - the application development engine for Kubernetes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/epinio/docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/epinio/docs/edit/main/src/explanations/advanced.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="advanced-topics"><a class="header" href="#advanced-topics">Advanced Topics</a></h1>
<h2 id="contents"><a class="header" href="#contents">Contents</a></h2>
<ul>
<li><a href="#epinio-advanced-topics">Epinio, Advanced Topics</a>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#epinio-prerequisites">Epinio prerequisites</a>
<ul>
<li><a href="#ingress-controller">Ingress Controller</a></li>
<li><a href="#cert-manager">Cert Manager</a></li>
</ul>
</li>
<li><a href="#epinio-installed-components">Epinio installed components</a>
<ul>
<li><a href="#kubed">Kubed</a></li>
<li><a href="#minio">Minio</a></li>
<li><a href="#container-registry">Container Registry</a></li>
<li><a href="#epinio">Epinio</a></li>
</ul>
</li>
<li><a href="#other-advanced-topics">Other Advanced Topics</a>
<ul>
<li><a href="#git-pushing">Git Pushing</a></li>
<li><a href="#traefik-and-linkerd">Traefik and Linkerd</a></li>
<li><a href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>There are some components that need to be installed on a Kubernetes cluster before
Epinio is installed. Epinio helm chart doesn't deploy these components.</p>
<h3 id="ingress-controller"><a class="header" href="#ingress-controller">Ingress controller</a></h3>
<p>On a kubernetes cluster, some services need to be accessible from outside.
For Epinio, the <code>API server</code> is one of them., and the various applications 
deployed with Epinio might need to be also reachable from outside.</p>
<p>One way to expose services to the world is by creating <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Ingress resources</a>.
Ingress resources on their own, have no effect. They are just descriptions of what kind of routing is desired. The actual implementation of this
wiring is handled by what is called, an Ingress controller.</p>
<blockquote>
<p>NOTE: Most clusters will have an Ingress controller deployed by default. If that's not the case, <a href="https://doc.traefik.io/traefik/providers/kubernetes-ingress/">Traefik</a> can be installed.
Other Ingress controllers should work too but Traefik is what is used in Epinio CI to test it.</p>
<p>Read the installation documentation on how to install Traefik: <a href="../installation/installation.html#ingress-controller">Install ingress controller</a></p>
</blockquote>
<p>An Ingress resource will be created for the Epinio API server and for each application deployed by Epinio.</p>
<h3 id="cert-manager"><a class="header" href="#cert-manager">Cert Manager</a></h3>
<p><a href="https://cert-manager.io/docs/">Upstream documentation</a></p>
<p>Cert Manager is a Kubernetes controller that generates and renews Certificates needed in order to
serve the various accessible endpoints over TLS (e.g. the Epinio API server).</p>
<p>Epinio supports various options when it comes to certificate issuers (let's encrypt, private CA, bring your own CA, self signed certs).
Cert Manager simplifies the way we handle the various different certificate issuers within Epinio.</p>
<p>You can read more about certificate issuers here: <a href="../howtos/certificate_issuers.html">certificate issuers documentation</a></p>
<h2 id="epinio-installed-components"><a class="header" href="#epinio-installed-components">Epinio installed components</a></h2>
<p>The official way to install Epinio is with the <a href="https://artifacthub.io/packages/helm/epinio/epinio">Epinio helm chart</a>.
This helm chart installs Epinio and additional components, listed below, that are needed for Epinio to work.</p>
<h3 id="epinio-api-server"><a class="header" href="#epinio-api-server">Epinio API server</a></h3>
<p>The main component of Epinio is the API server. The same <code>epinio</code> binary is both
the server and the cli. The server is started with <code>epinio server</code> command in a properly configured Kubernetes Pod.</p>
<p>Epinio cli and web UI functionality are both implemented using the endpoints provided by the Epinio API server
component. For example, when the user asks Epinio to &quot;push&quot; an application, the
cli will contact the &quot;Upload&quot;, &quot;Stage&quot; and &quot;Deploy&quot; endpoints of the Epinio API to upload the application code,
create a container image for the application using this code and run the application on the cluster.</p>
<p>The Epinio API server is running on the cluster and made accessible using Kubernetes resources like
Deployments, Services,  Ingresses and Secrets.</p>
<h3 id="kubed"><a class="header" href="#kubed">Kubed</a></h3>
<p><a href="https://github.com/kubeops/kubed">Upstream documentation</a></p>
<p>Kubed is installed by Epinio to keep secrets that are needed in more than
one namespace synced. For example, the image pull secret is needed in every application namespace
so that Kubernetes can pull the built application images from the <a href="#container-registry">Container Registry</a>.</p>
<p>Kubed makes sure that if the source secret changes, the copy will change too.</p>
<p>Warning: this doesn't mean things will still work if you re-generate a secret manually. Secret rotation will be handled by Epinio in the future.</p>
<h3 id="minio"><a class="header" href="#minio">Minio</a></h3>
<p><a href="https://github.com/minio/minio">Upstream project link</a></p>
<p>Minio is a storage solution that implements the same API as <a href="https://aws.amazon.com/s3/">Amazon S3</a>.</p>
<p>When the user pushes an application using a source code directory (with the <a href="../references/cli/epinio_push.html"><code>epinio push</code></a> command), the first step taken by the cli is to put the source code into a tarball and upload that to the Epinio API server. The server copies that to the configured S3 storage to be used later during the staging of the application.</p>
<p>When installing Epinio, the user can choose to use an external S3 compatible storage or let Epinio install Minio on the cluster (<a href="../howtos/setup_external_s3.html">See here how</a>).</p>
<h3 id="container-registry"><a class="header" href="#container-registry">Container Registry</a></h3>
<p>The result of Epinio's application staging is a container image. This image is used to create a Kubernetes deployment to run the application code.
The staging Job requires that image to be written to some container registry (See also <a href="../explanations/detailed-push-process.html">Detailed push process</a>). </p>
<p>By default the Epinio installation deploys a container registry inside the Kubernetes cluster to make the process easy and fast.</p>
<p>Epinio comes with two consumers of this registry:</p>
<ol>
<li>Staging job - pushing the images</li>
<li>Kubernetes - pulling the images when a Deployment is created for the Application</li>
</ol>
<p>Ideally all consumers will communicate with the registry over TLS to keep the communication encrypted.
Epinio controls the staging job and ensures that whatever CA is used to sign the registry certificate is trusted by it. Achieving the same for Kubernetes however requires configuration that cannot happen from within the cluster, therefore Epinio has no way to ensure that. Theoretically there are 3 options:</p>
<ol>
<li>Let the Epinio user manually configure Kubernetes to trust the CA</li>
<li>Use a well-known trusted CA, so there's no configuration needed</li>
<li>Don't encrypt the communication at all</li>
</ol>
<p>Currently Epinio doesn't support the first 2 options. If <code>containerregistry.enabled</code> is <code>true</code> during installation (default), Epinio will make Kubernetes pull the images unencrypted (option #3 above).
If encryption is desired, the container registry should be installed manually and configured as an <a href="../howtos/setup_external_registry.html">&quot;external&quot; registry</a> during Epinio installation.</p>
<blockquote>
<p>NOTE: Communication between the staging Job and the container registry is encrypted with TLS even when the built-in container registry is used.</p>
</blockquote>
<h2 id="other-advanced-topics"><a class="header" href="#other-advanced-topics">Other Advanced Topics</a></h2>
<h3 id="git-pushing"><a class="header" href="#git-pushing">Git Pushing</a></h3>
<p>The quick way of pushing an application, as explained at
<a href="../tutorials/quickstart.html#push-an-application">Quickstart: Push an application</a>, uses a local
directory containing a checkout of the application's sources.</p>
<p>Internally this is actually <a href="detailed-push-process.html">quite complex</a>. It
involves the creation and upload of an archive (tarball or zip) from these sources by the client
to the Epinio server, copying into Epinio's internal (or external) S3 storage,
copying from that storage to a PersistentVolumeClaim to be used in the job for staging,
i.e. compilation and creation of the docker image to be used by the underlying kubernetes cluster.</p>
<p>The process is a bit different when using the Epinio client's &quot;git mode&quot;. In
this mode <a href="../references/cli/epinio_push.html"><code>epinio push</code></a> does not take a local directory of sources, but the
location of a git repository holding the sources, and the id of the revision to
use. The client then asks the Epinio server to pull those sources and store them to the
S3 storage. The rest of the process is the same.</p>
<p>The syntax is</p>
<pre><code>epinio push --name NAME --git GIT-REPOSITORY-URL,REVISION
</code></pre>
<p>For comparison all the relevant syntax:</p>
<pre><code>epinio push
epinio push MANIFEST-PATH
epinio push --name NAME
epinio push --name NAME --path DIRECTORY
epinio push --name NAME --git GIT-REPOSITORY-URL,REVISION
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../explanations/explanations.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../explanations/detailed-push-process.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../explanations/explanations.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../explanations/detailed-push-process.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
