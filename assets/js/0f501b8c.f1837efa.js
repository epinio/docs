"use strict";(self.webpackChunkepinio_docusaurus=self.webpackChunkepinio_docusaurus||[]).push([[48643],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),h=s(a),m=o,d=h["".concat(p,".").concat(m)]||h[m]||u[m]||i;return a?n.createElement(d,r(r({ref:t},c),{},{components:a})):n.createElement(d,r({ref:t},c))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=h;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var s=2;s<i;s++)r[s]=a[s];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},5798:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var n=a(83117),o=a(80102),i=(a(67294),a(3905)),r=["components"],l={sidebar_label:"Custom application Helm charts",sidebar_position:16,title:"Using custom application Helm charts",description:"How to use custom application Helm charts.",keywords:["epinio","kubernetes","custom application helm chart"],"doc-type":["how-to"],"doc-topic":["epinio","how-to","other","custom-app-chart"],"doc-persona":["epinio-developer","epinio-operator"]},p=void 0,s={unversionedId:"howtos/other/using_custom_appcharts",id:"howtos/other/using_custom_appcharts",title:"Using custom application Helm charts",description:"How to use custom application Helm charts.",source:"@site/docs/howtos/other/using_custom_appcharts.md",sourceDirName:"howtos/other",slug:"/howtos/other/using_custom_appcharts",permalink:"/next/howtos/other/using_custom_appcharts",draft:!1,editUrl:"https://github.com/epinio/docs/edit/main/docs/howtos/other/using_custom_appcharts.md",tags:[],version:"current",sidebarPosition:16,frontMatter:{sidebar_label:"Custom application Helm charts",sidebar_position:16,title:"Using custom application Helm charts",description:"How to use custom application Helm charts.",keywords:["epinio","kubernetes","custom application helm chart"],"doc-type":["how-to"],"doc-topic":["epinio","how-to","other","custom-app-chart"],"doc-persona":["epinio-developer","epinio-operator"]},sidebar:"docs",previous:{title:"Port forwarding",permalink:"/next/howtos/other/port_forwarding"},next:{title:"Epinio's MinIO service",permalink:"/next/howtos/other/minio"}},c={},u=[{value:"Listing the available Helm charts",id:"listing-the-available-helm-charts",level:2},{value:"Deploying applications with a custom Helm chart",id:"deploying-applications-with-a-custom-helm-chart",level:2},{value:"Deploying applications with a custom Helm chart which has user-settable configuration values",id:"deploying-applications-with-a-custom-helm-chart-which-has-user-settable-configuration-values",level:2},{value:"Setting a default Helm chart",id:"setting-a-default-helm-chart",level:2},{value:"Querying the default Helm chart",id:"querying-the-default-helm-chart",level:2},{value:"Reset to the default Helm chart",id:"reset-to-the-default-helm-chart",level:2}],h={toc:u};function m(e){var t=e.components,a=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,n.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Epinio deploys applications on Kubernetes as ",(0,i.kt)("a",{parentName:"p",href:"https://helm.sh/"},"Helm charts"),"."),(0,i.kt)("p",null,"By default, a standard Helm chart is provided at Epinio installation time.\nHowever, operators may wish to\n",(0,i.kt)("a",{parentName:"p",href:"/next/howtos/customization/create_custom_appcharts"},"create and register custom charts"),"\nspecific to their environment."),(0,i.kt)("p",null,"After developers have registered custom charts in Epinio,\ndevelopers can use them when deploying their applications as described here."),(0,i.kt)("h2",{id:"listing-the-available-helm-charts"},"Listing the available Helm charts"),(0,i.kt)("p",null,"You can list the available Helm charts by running the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"epinio app chart list\n")),(0,i.kt)("p",null,"For example, this is the output of an unmodified Epinio installation:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"| DEFAULT |   NAME   |        DESCRIPTION         |\n|---------|----------|----------------------------|\n|         | standard | Epinio standard deployment |\n")),(0,i.kt)("p",null,"The output only lists the ",(0,i.kt)("inlineCode",{parentName:"p"},"standard")," Helm chart,\nwhich Epinio installs by default."),(0,i.kt)("h2",{id:"deploying-applications-with-a-custom-helm-chart"},"Deploying applications with a custom Helm chart"),(0,i.kt)("p",null,"Use the option ",(0,i.kt)("inlineCode",{parentName:"p"},"--app-chart")," to specify the name of the custom Helm chart\nto use when creating, updating, or deploying an application."),(0,i.kt)("p",null,"For detailed information on the ",(0,i.kt)("inlineCode",{parentName:"p"},"--app-chart")," setting, see the following CLI commands pages:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/next/references/commands/cli/app/epinio_app_create"},"epinio app create")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/next/references/commands/cli/app/epinio_app_update"},"epinio app update")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/next/references/commands/cli/epinio_push"},"epinio push"))),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Changing the chart to use ",(0,i.kt)("strong",{parentName:"p"},"isn't possible")," if the application has an active workload."),(0,i.kt)("p",{parentName:"admonition"},"To switch a deployed application to a different Helm chart,\nyou have to delete and re-deploy the application."),(0,i.kt)("p",{parentName:"admonition"},"Scaling the application to zero instances ",(0,i.kt)("strong",{parentName:"p"},"isn't enough"),".\nWhile that stops the application it doesn't remove the deployed workload,\njust the underlying active elements.")),(0,i.kt)("h2",{id:"deploying-applications-with-a-custom-helm-chart-which-has-user-settable-configuration-values"},"Deploying applications with a custom Helm chart which has user-settable configuration values"),(0,i.kt)("p",null,"The general mechanism is the same as described in the earlier section."),(0,i.kt)("p",null,"However, use the option ",(0,i.kt)("inlineCode",{parentName:"p"},"--chart-value")," to specify name and value of a single user-settable configuration value.\nUse the option as many times as needed to set all the desired configuration values."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"epinio push --name APPNAME --path APPSOURCEPATH --app-chart CHARTNAME --chart-value CVNAME=VALUE ...\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"User-settable configuration values are usually optional.\nThe application chart should contain sensible defaults for all configuration values not set by the user.")),(0,i.kt)("h2",{id:"setting-a-default-helm-chart"},"Setting a default Helm chart"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"--app-chart")," option described in the earlier section is more suitable for single\nor a small number requiring a custom Helm chart."),(0,i.kt)("p",null,"However, if most applications use a specific custom chart,\nfor example, ",(0,i.kt)("inlineCode",{parentName:"p"},"FOO"),",\nit makes more sense to change the default chart."),(0,i.kt)("p",null,"You can set a custom chart as the default by running the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"epinio app chart default FOO\n")),(0,i.kt)("p",null,"Now, all future invocations of ",(0,i.kt)("inlineCode",{parentName:"p"},"epinio push")," uses the custom Helm chart set as default.\nYou can override it with the ",(0,i.kt)("inlineCode",{parentName:"p"},"--app-chart")," option, described above."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"default")," chart is a ",(0,i.kt)("strong",{parentName:"p"},"local")," setting. It affects only the local developer's environment.")),(0,i.kt)("h2",{id:"querying-the-default-helm-chart"},"Querying the default Helm chart"),(0,i.kt)("p",null,"You can check which chart is the ",(0,i.kt)("inlineCode",{parentName:"p"},"default")," by running the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"epinio app chart default\n")),(0,i.kt)("p",null,"You can check which chart is the ",(0,i.kt)("inlineCode",{parentName:"p"},"default")," when listing the available charts.\nFor example, the output below shows the chart ",(0,i.kt)("inlineCode",{parentName:"p"},"FOO")," as the current default:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"| DEFAULT |   NAME   |        DESCRIPTION         |\n|---------|----------|----------------------------|\n| *       | FOO      | Foofy deployment           |\n|         | standard | Epinio standard deployment |\n")),(0,i.kt)("h2",{id:"reset-to-the-default-helm-chart"},"Reset to the default Helm chart"),(0,i.kt)("p",null,"You can set the system chart ",(0,i.kt)("inlineCode",{parentName:"p"},"standard")," back as the default, by running the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"epinio app chart default ''\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"You need the ",(0,i.kt)("strong",{parentName:"p"},"empty string")," used in place of the chart name.\nIf you don't add it,\nthe command only lists the charts available.")))}m.isMDXComponent=!0}}]);