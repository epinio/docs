<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.3.0 plugin-docs plugin-id-default docs-doc-id-explanations/advanced">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-56382716-12","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="Epinio docs" href="/opensearch.xml"><title data-rh="true">Epinio docs</title><meta data-rh="true" property="og:title" content="Epinio docs"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.epinio.io/1.3.0/explanations/advanced"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.3.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.3.0"><meta data-rh="true" name="docsearch:version" content="1.3.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.3.0"><meta data-rh="true" name="description" content="Contents"><meta data-rh="true" property="og:description" content="Contents"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.epinio.io/1.3.0/explanations/advanced"><link data-rh="true" rel="alternate" href="https://docs.epinio.io/1.3.0/explanations/advanced" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.epinio.io/1.3.0/explanations/advanced" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://F9GBZ0DFYI-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.cbf4b023.css">
<link rel="preload" href="/assets/js/runtime~main.ea0f5b82.js" as="script">
<link rel="preload" href="/assets/js/main.990a81ef.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="Epinio" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/favicon.svg" alt="Epinio" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Epinio</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/1.3.0">1.3.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/explanations/advanced">Next ðŸš§</a></li><li><a class="dropdown__link" href="/explanations/advanced">1.9.0</a></li><li><a class="dropdown__link" href="/1.8.1/explanations/advanced">1.8.1</a></li><li><a class="dropdown__link" href="/1.8.0/explanations/advanced">1.8.0</a></li><li><a class="dropdown__link" href="/1.7.1/explanations/advanced">1.7.1</a></li><li><a class="dropdown__link" href="/1.7.0/explanations/advanced">1.7.0</a></li><li><a class="dropdown__link" href="/1.6.2/explanations/advanced">1.6.2</a></li><li><a class="dropdown__link" href="/1.6.1/explanations/advanced">1.6.1</a></li><li><a class="dropdown__link" href="/1.6.0/explanations/advanced">1.6.0</a></li><li><a class="dropdown__link" href="/1.5.2/explanations/advanced">1.5.2</a></li><li><a class="dropdown__link" href="/1.5.1/explanations/advanced">1.5.1</a></li><li><a class="dropdown__link" href="/1.5.0/explanations/advanced">1.5.0</a></li><li><a class="dropdown__link" href="/1.4.0/explanations/advanced">1.4.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/1.3.0/explanations/advanced">1.3.0</a></li><li><a class="dropdown__link" href="/1.2.0/explanations/advanced">1.2.0</a></li><li><a class="dropdown__link" href="/1.1.0/explanations/advanced">1.1.0</a></li><li><a class="dropdown__link" href="/1.0.0/explanations/advanced">1.0.0</a></li><li><a class="dropdown__link" href="/0.9.0/explanations/advanced">0.9.0</a></li><li><a class="dropdown__link" href="/0.8.0/explanations/advanced">0.8.0</a></li><li><a class="dropdown__link" href="/0.7.1/explanations/advanced">0.7.1</a></li><li><a class="dropdown__link" href="/0.6.2/explanations/advanced">0.6.2</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/1.3.0">Docs</a><a href="https://github.com/epinio/epinio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.rancher.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Rancher Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/1.3.0">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/1.3.0/tutorials/quickstart">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/tutorials/quickstart">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/tutorials/single-dev-workflow">Epinio Journey: Single Dev Workflow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/1.3.0/installation/install_epinio">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/installation/install_epinio">Install Epinio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/installation/install_epinio_cli">Install Epinio CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/installation/dns_setup">DNS setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/installation/magicDNS_setup">Magic DNS setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/installation/uninstall_epinio">Uninstall Epinio</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/1.3.0/explanations/advanced">Explanations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/1.3.0/explanations/advanced">Advanced topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/explanations/detailed-push-process">Detailed Push Process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/explanations/principles">Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.3.0/explanations/security">Security</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/1.3.0/howtos/certificate_issuers">HowTos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/1.3.0/references/system_requirements/global">Reference documentation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/1.3.0/versions"></a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Epinio docs<!-- --> <b>1.3.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/explanations/advanced">latest version</a></b> (<!-- -->1.9.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Explanations</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Advanced topics</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.3.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Advanced Topics</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="contents">Contents<a class="hash-link" href="#contents" title="Direct link to heading">â€‹</a></h2><ul><li><a href="#epinio-advanced-topics">Epinio, Advanced Topics</a><ul><li><a href="#contents">Contents</a></li><li><a href="#prerequisites">Epinio prerequisites</a><ul><li><a href="#ingress-controller">Ingress Controller</a></li><li><a href="#cert-manager">Cert Manager</a></li></ul></li><li><a href="#epinio-installed-components">Epinio installed components</a><ul><li><a href="#kubed">Kubed</a></li><li><a href="#minio">Minio</a></li><li><a href="#container-registry">Container Registry</a></li></ul></li><li><a href="#other-advanced-topics">Other Advanced Topics</a><ul><li><a href="#git-pushing">Git Pushing</a></li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â€‹</a></h2><p>There are some components that need to be installed on a Kubernetes cluster before
Epinio is installed. Epinio helm chart doesn&#x27;t deploy these components.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ingress-controller">Ingress controller<a class="hash-link" href="#ingress-controller" title="Direct link to heading">â€‹</a></h3><p>On a kubernetes cluster, some services need to be accessible from outside.
For Epinio, the <code>API server</code> is one of them., and the various applications
deployed with Epinio might need to be also reachable from outside.</p><p>One way to expose services to the world is by creating <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank" rel="noopener noreferrer">Ingress resources</a>.
Ingress resources on their own, have no effect. They are just descriptions of what kind of routing is desired. The actual implementation of this
wiring is handled by what is called, an Ingress controller.</p><blockquote><p>NOTE: Most clusters will have an Ingress controller deployed by default. If that&#x27;s not the case, <a href="https://doc.traefik.io/traefik/providers/kubernetes-ingress/" target="_blank" rel="noopener noreferrer">Traefik</a> can be installed.
Other Ingress controllers should work too but Traefik is what is used in Epinio CI to test it.</p><p>Read the installation documentation on how to install Traefik: <a href="/1.3.0/installation/install_epinio#ingress-controller">Install ingress controller</a></p></blockquote><p>An Ingress resource will be created for the Epinio API server and for each application deployed by Epinio.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cert-manager">Cert Manager<a class="hash-link" href="#cert-manager" title="Direct link to heading">â€‹</a></h3><p><a href="https://cert-manager.io/docs/" target="_blank" rel="noopener noreferrer">Upstream documentation</a></p><p>Cert Manager is a Kubernetes controller that generates and renews Certificates needed in order to
serve the various accessible endpoints over TLS (e.g. the Epinio API server).</p><p>Epinio supports various options when it comes to certificate issuers (let&#x27;s encrypt, private CA, bring your own CA, self signed certs).
Cert Manager simplifies the way we handle the various different certificate issuers within Epinio.</p><p>You can read more about certificate issuers here: <a href="/1.3.0/howtos/certificate_issuers">certificate issuers documentation</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="epinio-installed-components">Epinio installed components<a class="hash-link" href="#epinio-installed-components" title="Direct link to heading">â€‹</a></h2><p>The official way to install Epinio is with the <a href="https://artifacthub.io/packages/helm/epinio/epinio" target="_blank" rel="noopener noreferrer">Epinio helm chart</a>.
This helm chart installs Epinio and additional components, listed below, that are needed for Epinio to work.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="epinio-api-server">Epinio API server<a class="hash-link" href="#epinio-api-server" title="Direct link to heading">â€‹</a></h3><p>The main component of Epinio is the API server. The same <code>epinio</code> binary is both
the server and the cli. The server is started with <code>epinio server</code> command in a properly configured Kubernetes Pod.</p><p>Epinio cli and web UI functionality are both implemented using the endpoints provided by the Epinio API server
component. For example, when the user asks Epinio to &quot;push&quot; an application, the
cli will contact the &quot;Upload&quot;, &quot;Stage&quot; and &quot;Deploy&quot; endpoints of the Epinio API to upload the application code,
create a container image for the application using this code and run the application on the cluster.</p><p>The Epinio API server is running on the cluster and made accessible using Kubernetes resources like
Deployments, Services,  Ingresses and Secrets.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubed">Kubed<a class="hash-link" href="#kubed" title="Direct link to heading">â€‹</a></h3><p><a href="https://github.com/kubeops/kubed" target="_blank" rel="noopener noreferrer">Upstream documentation</a></p><p>Kubed is installed by Epinio to keep secrets that are needed in more than
one namespace synced. For example, the image pull secret is needed in every application namespace
so that Kubernetes can pull the built application images from the <a href="#container-registry">Container Registry</a>.</p><p>Kubed makes sure that if the source secret changes, the copy will change too.</p><p>Warning: this doesn&#x27;t mean things will still work if you re-generate a secret manually. Secret rotation will be handled by Epinio in the future.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="minio">Minio<a class="hash-link" href="#minio" title="Direct link to heading">â€‹</a></h3><p><a href="https://github.com/minio/minio" target="_blank" rel="noopener noreferrer">Upstream project link</a></p><p>Minio is a storage solution that implements the same API as <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a>.</p><p>When the user pushes an application using a source code directory (with the <a href="/1.3.0/references/commands/cli/epinio_push"><code>epinio push</code></a> command), the first step taken by the cli is to put the source code into a tarball and upload that to the Epinio API server. The server copies that to the configured S3 storage to be used later during the staging of the application.</p><p>When installing Epinio, the user can choose to use an external S3 compatible storage or let Epinio install Minio on the cluster (<a href="/1.3.0/howtos/setup_external_s3">See here how</a>).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="container-registry">Container Registry<a class="hash-link" href="#container-registry" title="Direct link to heading">â€‹</a></h3><p>The result of Epinio&#x27;s application staging is a container image. This image is used to create a Kubernetes deployment to run the application code.
The staging Job requires that image to be written to some container registry (See also <a href="/1.3.0/explanations/detailed-push-process">Detailed push process</a>). </p><p>By default the Epinio installation deploys a container registry inside the Kubernetes cluster to make the process easy and fast.</p><p>Epinio comes with two consumers of this registry:</p><ol><li>Staging job - pushing the images</li><li>Kubernetes - pulling the images when a Deployment is created for the Application</li></ol><p>Ideally all consumers will communicate with the registry over TLS to keep the communication encrypted.
Epinio controls the staging job and ensures that whatever CA is used to sign the registry certificate is trusted by it. Achieving the same for Kubernetes however requires configuration that cannot happen from within the cluster, therefore Epinio has no way to ensure that. Theoretically there are 3 options:</p><ol><li>Let the Epinio user manually configure Kubernetes to trust the CA</li><li>Use a well-known trusted CA, so there&#x27;s no configuration needed</li><li>Don&#x27;t encrypt the communication at all</li></ol><p>Currently Epinio doesn&#x27;t support the first 2 options. If <code>containerregistry.enabled</code> is <code>true</code> during installation (default), Epinio will make Kubernetes pull the images unencrypted (option #3 above).
If encryption is desired, the container registry should be installed manually and configured as an <a href="/1.3.0/howtos/setup_external_registry">&quot;external&quot; registry</a> during Epinio installation.</p><blockquote><p>NOTE: Communication between the staging Job and the container registry is encrypted with TLS even when the built-in container registry is used.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-advanced-topics">Other Advanced Topics<a class="hash-link" href="#other-advanced-topics" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="git-pushing">Git Pushing<a class="hash-link" href="#git-pushing" title="Direct link to heading">â€‹</a></h3><p>The quick way of pushing an application, as explained at
<a href="/1.3.0/tutorials/quickstart#push-an-application">Quickstart: Push an application</a>, uses a local
directory containing a checkout of the application&#x27;s sources.</p><p>Internally this is actually <a href="/1.3.0/explanations/detailed-push-process">quite complex</a>. It
involves the creation and upload of an archive (tarball or zip) from these sources by the client
to the Epinio server, copying into Epinio&#x27;s internal (or external) S3 storage,
copying from that storage to a PersistentVolumeClaim to be used in the job for staging,
i.e. compilation and creation of the docker image to be used by the underlying kubernetes cluster.</p><p>The process is a bit different when using the Epinio client&#x27;s &quot;git mode&quot;. In
this mode <a href="/1.3.0/references/commands/cli/epinio_push"><code>epinio push</code></a> does not take a local directory of sources, but the
location of a git repository holding the sources, and the id of the revision to
use. The client then asks the Epinio server to pull those sources and store them to the
S3 storage. The rest of the process is the same.</p><p>The syntax is</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">epinio push --name NAME --git GIT-REPOSITORY-URL,REVISION</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For comparison all the relevant syntax:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">epinio push</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">epinio push MANIFEST-PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">epinio push --name NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">epinio push --name NAME --path DIRECTORY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">epinio push --name NAME --git GIT-REPOSITORY-URL,REVISION</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/epinio/docs/edit/main/versioned_docs/version-1.3.0/explanations/advanced.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/1.3.0/installation/uninstall_epinio"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Uninstall Epinio</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/1.3.0/explanations/detailed-push-process"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Detailed Push Process</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#contents" class="table-of-contents__link toc-highlight">Contents</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#ingress-controller" class="table-of-contents__link toc-highlight">Ingress controller</a></li><li><a href="#cert-manager" class="table-of-contents__link toc-highlight">Cert Manager</a></li></ul></li><li><a href="#epinio-installed-components" class="table-of-contents__link toc-highlight">Epinio installed components</a><ul><li><a href="#epinio-api-server" class="table-of-contents__link toc-highlight">Epinio API server</a></li><li><a href="#kubed" class="table-of-contents__link toc-highlight">Kubed</a></li><li><a href="#minio" class="table-of-contents__link toc-highlight">Minio</a></li><li><a href="#container-registry" class="table-of-contents__link toc-highlight">Container Registry</a></li></ul></li><li><a href="#other-advanced-topics" class="table-of-contents__link toc-highlight">Other Advanced Topics</a><ul><li><a href="#git-pushing" class="table-of-contents__link toc-highlight">Git Pushing</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/epinio" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rancher-users.slack.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/Rancher_Labs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/epinio/epinio" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ea0f5b82.js"></script>
<script src="/assets/js/main.990a81ef.js"></script>
</body>
</html>